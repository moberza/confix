<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>Confix: A Build Tool on Top of GNU Automake</title>
</head>

<body>

<h1>Confix: A Build Tool on Top of GNU Automake</h1>

<H2>Introduction</H2>

<p>Build tools such as <a
href="http://www.gnu.org/software/automake/">Automake</a>, <a
href="http://www.cmake.org">CMake</a>, or <a
href="http://www.scons.org">SCons</a>, try to shield the unfortunate C
or C++ programmer from crafting compiler and linker commandlines for
myriads of different compilers and compiler versions. Each of these
tools has a slightly different focus - some prefer cross-platform
features, and some focus on fully supporting all of the Unices. Each
is unbeatable in doing its job. Basically, all you have to tell them
is, for example, "Compile these files as C, and make a library out of
them!", and they do what you want.</p>

<p>Automake, CMake, and SCons do not, however, help you in managing
your project. All of us know that, once the project has grown beyond a
certain size, restructuring it can become a nightmare. Even moving one
header file can break the build for a day or two, since everybody has
to adjust include paths. Or, even worse, consider you split a library
into two or three separate libraries because it has acquired too many
responsibilities over its lifetime - you'd have to instruct everyone
who has used the library about the new structure. (People often argue
that a project's structure does not contribute any quality measure,
and that the time spent on the structure be better spent on getting
the code right. This is certainly a valid view of the matter, but it's
a different story, and I don't argue against. Anyway, if you do not
care about structure, then you should only be reading on if you want
to use the features of Automake but don't want to learn its damn
syntax.)</p>

<p>Project structure maintenance is of course but one of Confix's
features, although the strongest. The following list is a rough
compilation of things that Confix can do for the programmer.

<ul>

  <li><b>Automake input file generation</b>.

  <p>Automake is one of the most widely used build tools in the Unix
  Open Source community. Everybody who likes hanging around there
  knows the <code>configure && make && make install</code> dance, the
  hallmark of Automake. But, as comfortable it is for the end user who
  is in charge of compiling and installing a package, as odd it is for
  the maintainer of the package. Confix tries to take away the
  complexity from the build instructions, and defines it own minimal
  set of functions which are mapped onto the Automake
  language. (Actually, Confix project files are written in Python, so
  chances are you don't have to learn yet another language).</p>
  </li>

  <li><b>Automatic composition of the compilation's include path.</b>

  <p>Maintenance of the include path that has to be set when compiling
  source code is one of the great challenges in build
  administration. You have to take care that you point the compiler in
  every directory that contains header files needed for
  compilation. This is often accomplished in a trial and error kind of
  way. More than that, one often faces the issue of leftover
  directories in the include path - ones that <i>did</i> contain
  needed header files way in the past, but which are either not needed
  anymore, or which were moved. Include paths tend to grow rather than
  shrink. Note that this include path problem is one of the reasons
  why project structures tend to become a maze - the cost of moving
  files around rises with the size of the project.</p>

  <p>Confix knows which compilation needs which header files (by
  simply parsing the files that are subject to compilation), and can
  match this information against the location where these headers
  are. This way, at the heart of its implementation, it maintains a
  graph which contains enough information to be able to compose a
  correct include path for every compilation - without requiring the
  programmer to do anything.</p>
  </li>

  <li><b>Automatic composition of linker command lines</b>.

  <p>Placing the libraries you need on the linker command line is a
  task which is at least as tedious as composing a correct include
  path. In addition to determining all the libraries that you need,
  you have to take care to place them on the linker command line in
  the correct order (most linkers are very particular about the
  references not pointing in the wrong direction). Needless to say
  that one would rather refrain from changing the library structure
  when he expects linker lines breaking and people getting
  annoyed.</p>

  <p>Confix solves this problem similar to the include path problem
  above. As it knows who needs what, it is not difficult to compose a
  correct linker line - again without demanding anything from the
  programmer.</p>
  </li>

  <li><b>Independently maintained packages.</b>

  <p>For various reasons - project size, organizational, or simply
  taste (to foster good interfaces, for example) - it might make sense
  to split a big project into several smaller ones that are
  independently maintained. With Automake, the granularity of a
  project is the unit with which one does the <code>configure && make
  && make install</code> dance. A project is finally made public by
  saying <code>make install</code>, and this is how project teams
  communicate changes: one team <i>installs</i> a tested version of
  their project (or releases it for installation), and the other team
  uses it.</p>
  </li>

</ul>





<P>Confix does what is otherwise the job of the package maintainer:
write input files for <a
href="http://www.gnu.org/software/automake/">Automake</a> and <a
href="http://www.gnu.org/software/autoconf/">Autoconf</a>. It tries to
comprehend the source code, and determines how to shape
<code>configure.ac</code> and the different <code>Makefile.am</code>
files in the package in order to perform a clean build.

<P>The main features of Confix include

<UL>

  <LI><I>Dependency calculation</I>. A correct build order of the
      package's directories is automatically determined. Furthermore,
      installed packages integrate into dependency calculation by
      means of a global "repository".  </LI>

  <LI><I>Propagation of Autoconf checks between packages</I>. When one
      package uses another package, there often is the problem that
      the using package needs to apply the same Autoconf checks (or a
      subset thereof) that were applied when the other package was
      built. Not doing so can lead to subtle bugs; for example,
      disagreement about member offsets in structures. Confix tries to
      solve that problem by propagating checks into the using package.
      </LI>

  <LI><I>Mapping of C++ namespaces to include paths</I>. As Confix
      examines the source code, it can detect C++ namespaces, and map
      that hierarchy to the install location of the respective header
      files. (This feature can be suppressed though.)
  </LI>

  <LI><I>Interfaces for custom build instructions</I>. The plan is
      that a package maintainer need not write any build instructions
      at all, but to let Confix do that task by comprehending the
      source code. However, should Confix need help from the
      maintainer, this can be done using a Python interface to modify
      build properties. One can place arbitrary Python code into
      source files, for example, or into dedicated configuration
      files.  </LI>
      
</UL>

<p>Confix is licensed under the <a
href="http://www.gnu.org/licensing/licenses/lesser.html">GNU
{Lesser,Library} General Public License</a>.

<h2>Download and Installation</H2>

<p>You can download releases from the <a
href="http://sourceforge.net/projects/confix">project summary page at
Sourceforge</a>. The most recent stable release is 2.0. If no release
is recent enough, you may always checkout a <a
href="http://sourceforge.net/svn/?group_id=68975">development version
from Subversion</a>. You can also <a
href="http://svn.sourceforge.net/viewvc/confix/">browse the Subversion
repository without having a Subversion client installed</a>.

<p>Follow the instructions in the <a
href="http://svn.sourceforge.net/viewvc/*checkout*/confix/confix/trunk/INSTALL">INSTALL
file</a>.</p>

<h2>Documentation</h2>

<p>Umm, well. There is a bunch of it, but this has been extremely
outdated with the 2.0 release. It is a good reading if you want to
grasp the problems that Confix intends to solve, but it does not
explain the way Confix is <i>currently</i> trying to solve these
problems. (You can view the manual here as <a
href="confix.html">HTML</a> and <a href="confix.ps">Postscript</a>, if you want.)

<p><b>Hacking</b>

<p>The <a
href="http://svn.sourceforge.net/viewvc/*checkout*/confix/confix/trunk/HACKING">HACKING
file</a> gives an overview of what you're getting involved with.

As opposed to the documentation, the <a
href="epydoc/index.html">implementation documentation</a> reflects a
<i>current</i> state. It is automatically extracted from the source
using the extremely cool <a
href="http://epydoc.sourceforge.net">Epydoc</a>.

<h2>Mailing Lists</h2>

<p>There are <a
href="http://sourceforge.net/mail/?group_id=68975">three Confix
mailing lists at Sourceforge</a>.

<ul>
  <li>The announcements list, <a
      href="mailto:confix-announce@lists.sourceforge.net">confix-announce@lists.sourceforge.net</a>. Release
      announcements and the like are posted
      there. (Un)subscribe <a
      href="http://lists.sourceforge.net/lists/listinfo/confix-announce">here</a>.
  </li>

  <li>The users list, <a
      href="mailto:confix-help@lists.sourceforge.net">confix-help@lists.sourceforge.net</a>. End
      user questions are answered there. (Un)subscribe <a
      href="http://lists.sourceforge.net/lists/listinfo/confix-help">here</a>.
  </li>

  <li>The developers list, <a
      href="mailto:confix-devel@lists.sourceforge.net">confix-devel@lists.sourceforge.net</a>. Developers
      communicate there. (Un)subscribe <a
      href="http://lists.sourceforge.net/lists/listinfo/confix-devel">here</a>.
  </li>

</ul>

<h2>Acknowledgments</h2>

<p>Most of all I'd like to thank the handful of people that are using
Confix, and who continue to provide valuable input. Most of these
people are good colleagues of mine.

<p>I also express my thanks to my employer, <a
href="http://www.salomon.at">Salomon Automation</a>, who made it
possible to go open source with Confix. I have spent a considerable
amount of working hours on it, and appreciate that it is not
selfunderstood for a company to take that step.

<p><A href="http://sourceforge.net"> <IMG src="http://sourceforge.net/sflogo.php?group_id=68975&amp;type=5" width="210" height="62" border="0" alt="SourceForge Logo"></A>

<hr>
</body> </html>
